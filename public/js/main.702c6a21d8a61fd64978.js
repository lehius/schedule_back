!function(e){function t(t){for(var r,i,c=t[0],u=t[1],l=t[2],f=0,d=[];f<c.length;f++)i=c[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(s&&s(t);d.length;)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==o[u]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={0:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var s=u;a.push([121,1]),n()}({121:function(e,t,n){n(122),e.exports=n(308)},308:function(e,t,n){"use strict";n.r(t);n(312);function r(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function c(e){r(i,o,a,c,u,"next",e)}function u(e){r(i,o,a,c,u,"throw",e)}c(void 0)}))}}var a,i=n(309),c=n(311),u={},l=document.getElementById("title"),s=document.getElementById("table-head"),f=document.getElementById("table-body"),d=document.querySelector("#currentDate>h1"),p=document.querySelector("#currentTime>h1"),h="th",m="td",v=c.getParametrValueFromURI("timeout");v=v&&v>2e3?v:15e3;var g=function(){var e=c.GetDateTime();d.innerHTML=e.date,p.innerHTML=e.time};function b(){return y.apply(this,arguments)}function y(){return(y=o(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("data.csv");case 2:return t=e.sent,e.next=5,t.text();case 5:return n=e.sent,r=new i,u=r.parse(n),console.log("data",u),l.innerHTML=u.head[0],s.children[1].remove(),c.FillingCells([u.head[1]],s,h),f.innerHTML="",e.next=15,c.FillingCells(u.body,f,m);case 15:o=e.sent,a=c.ViewPages(o,f,v);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}g(),setInterval(g,1e4),b();var w=document.getElementById("file"),x=document.getElementById("form");x&&(x.action="/upload",x.method="POST",x.enctype="multipart/form-data"),w.onchange=function(e){x.submit()};!function e(){fetch("/subscribe",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(e){return e.json()})).then((function(t){t.reload&&(console.log("client: reload"),clearInterval(a),setTimeout(b,100)),e()})).catch((function(e){console.log("err subscribe:",e),document.location.reload(!0)}))}()},309:function(e,t,n){(function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(e){return 0==e.indexOf('"')&&e.lastIndexOf('"')==e.length-1?e.substring(1,e.length-1):isNaN(e)?e:parseFloat(e)},r=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.exist)return e.instance;this.opts={delimeter:",",parseHeader:!0},e.instance=this,e.exist=!0}var r,o,a;return r=e,(o=[{key:"parse",value:function(e,t){t=Object.assign(this.opts,t);var r={},o=e.replace(/\r/g,"").split("\n");if(t.parseHeader){var a=o[0].split(t.delimeter).join(" ").trim();r.head=[a];var i=o[1].split(t.delimeter);r.head.push(i.map((function(e){return n(e)}))),o=o.slice(2)}return r.body=o.map((function(e){return e.split(t.delimeter).map((function(e){return n(e)}))})),r}},{key:"stringify",value:function(e,t){var n="";return Array.isArray(e)?(e.forEach((function(e){1!=e.length&&(n+=e.join(",")+"\n")})),n):(console.warn("data for rows is not array"),n)}}])&&t(r.prototype,o),a&&t(r,a),e}();e.export=r}).call(this,n(310)(e))},311:function(e,t){function n(e){throw new Error('"'+e+'" is read-only')}var r=function(e,t){t.innerHTML="",e.forEach((function(e){t.appendChild(e)}))};e.exports={GetDateTime:function(){var e={},t=new Date,n=("00"+t.getDate()).slice(-2),r="";switch(t.getMonth()){case 0:r="января";break;case 1:r="февраля";break;case 2:r="марта";break;case 3:r="апреля";break;case 4:r="мая";break;case 5:r="июня";break;case 6:r="июля";break;case 7:r="августа";break;case 8:r="сентября";break;case 9:r="октября";break;case 10:r="ноября";break;case 11:r="декабря"}var o=("0000"+t.getFullYear()).slice(-4),a=("00"+t.getHours()).slice(-2),i=("00"+t.getMinutes()).slice(-2);return("00"+t.getSeconds()).slice(-2),e.date=n+" "+r+" "+o,e.time=a+":"+i,e},FillingCells:function e(t,r,o){var a=r.children,i=t.length,c=0,u=[];if(u[c]=[],t.forEach((function(t){if(Array.isArray(t)){if(t.length<2)return;var n=document.createElement("tr");return e(t,n,o),r.appendChild(n),document.body.offsetHeight>window.innerHeight*(c+1)&&(c++,u[c]=[]),void u[c].push(n)}var a=document.createElement(o);t!=t&&(t="-"),a.innerHTML=t,r.appendChild(a)})),a>i)for(;a>i;n("dataCount"),i++)r.children[i].remove();return u},ViewPages:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15e3,o=0;return r(e[o],t),setInterval((function(){o%=e.length,r(e[o],t),o++}),n)},getParametrValueFromURI:function(e){var t=location.search.substring(1);if(!t)return null;for(var n=t.split("&"),r=0;r<n.length;r++){var o=n[r].split("=");if(o[0]===e&&o[1])return o[1]}return null}}},312:function(e,t,n){}});